<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />

  <title>SeloVerde ES - Visualização de Desembargo</title>

  <link rel="icon" type="image/x-icon" href="assets/favicon.png">
  <link rel="stylesheet" href="css/stylesHeader.css">
  <link rel="stylesheet" href="css/stylesUI.css">
  <link rel="stylesheet" href="css/stylesDesembargo.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">

</head>
<body>
  <!-- Header -->
  <header class="top-bar">
    <div class="logo"><img src="assets/simbolo-seloverde.svg" alt="Logo Selo Verde"></div>

    <div class="title-text">
      <h1>SeloVerde ES - Área Técnica</h1>
      <h2>Formulário de Cadastro Deliberações de Desembargos</h2>
      <span class="restricted-badge">Área Restrita</span>
    </div>

    <div class="logout-container">
      <button id="logoutBtn" class="logout-btn" aria-label="Logout" title="Sair">Logout</button>
    </div>

  </header>
  
<main>
  <form id="desembargoForm" class="sv-grid" autocomplete="off" novalidate>

    <!-- Intro e Toggle de Edição -->
    <div class="sv-intro-row">
      <p class="sv-intro">Visualize ou edite as informações do desembargo:</p>
      <div class="edit-toggle">
        <label style="display:inline-flex;align-items:center;gap:8px;">
          <input type="checkbox" id="enableEdit"> <span>Habilitar edição</span>
        </label>
      </div>
    </div>

    <!-- Tipo de Busca (Legado vs Simlam) -->
    <div class="busca-tipo">
      <label class="label-bold">Origem dos dados:</label>
      <div class="tipo-controls">
        <label>
          <input type="radio" name="tipoBusca" value="ate2012" disabled /> 
          <span>Embargos até 2011 — SEP/GeoIDAF</span>
        </label>
        <label>
          <input type="radio" name="tipoBusca" value="apos2012" disabled /> 
          <span>Embargos a partir de 2012 — SIMLAM</span>
        </label>
      </div>
    </div>

    <!-- Grupo de Processos -->
    <div class="processos-group">
        <label class="section-title">Número do(s) Processo(s):</label>
        <div class="processos-row">
            <div class="processo-item">
                <label for="numeroEdocs" class="">E-Docs:</label>
                <input id="numeroEdocs" name="numeroEdocs" class="input" type="text" placeholder="Ex: 2025-A12345" disabled/>
                <span class="error-msg" id="error-numeroEdocs"></span>
            </div>
            <div class="processo-item">
                <label for="processoSimlam" id = "labelSimlam" class="">SIMLAM:</label>
                <div class="input-with-icon">
                    <input id="processoSimlam" name="processoSimlam" class="input" type="text" placeholder="Ex: 12345/2025" disabled/>
                    <!-- Botões de busca removidos ou ocultos na visualização inicial, aparecem se editar -->
                    <button type="button" id="btnBuscarProcesso" class="icon-btn" style="display:none;" disabled><i class="fa-solid fa-search"></i></button>
                </div>
                <span class="error-msg" id="error-processoSimlam"></span>
            </div>
            <div class="processo-item">
                <label for="numeroSEP" id = "labelSEP" class="">SEP:</label>
                <div class="input-with-icon">
                    <input id="numeroSEP" name="numeroSEP" class="input" type="text" placeholder="Ex: 123456789" disabled/>
                    <button type="button" id="btnBuscarSEP" class="icon-btn" style="display:none;" disabled><i class="fa-solid fa-search"></i></button>
                </div>
                <span class="error-msg" id="error-numeroSEP"></span>
            </div>
        </div>
    </div>

    <!-- Termo e Nome -->
    <div class="termo">
      <div class="section-title">Termo de Embargo</div>
      <div class="termo-small">
          <div class="small-wrap">
            <label for="numero" class="required">Número:</label>
            <input id="numero" name="numero" class="input-left" type="text" disabled/>
            <span class="error-msg" id="error-numero"></span>
          </div>
          <div class="small-wrap">
            <label for="serie" class="required">Série:</label>
            <input id="serie" name="serie" class="input-left" type="text" disabled/>
            <span class="error-msg" id="error-serie"></span>
          </div>
      </div>
    </div>

    <div class="nome">
      <label for="nomeAutuado" id="textoNomeAutuado">Nome do autuado:</label>
      <input id="nomeAutuado" name="nomeAutuado" class="input" type="text" disabled />
      <span class="error-msg" id="error-nomeAutuado"></span>
    </div>

    <!-- Coordenadas + Dados do Embargo -->
    <div class="coordenadas">
      <div class="geo-row">
        <div class="geo-item">
          <label for="coordenadaX" class="required">Coordenada X(m):</label>
          <input type="text" id="coordenadaX" name="coordenadaX" class="input" disabled>
          <span class="error-msg" id="error-coordenadaX"></span>
        </div>
        <div class="geo-item">
          <label for="coordenadaY" class="required">Coordenada Y(m):</label>
          <input type="text" id="coordenadaY" name="coordenadaY" class="input" disabled>
          <span class="error-msg" id="error-coordenadaY"></span>
        </div>
        <div class="geo-item">
            <label for="dataEmbargo">Data do Embargo:</label>
            <input type="date" id="dataEmbargo" name="dataEmbargo" class="input" disabled>
            <span class="error-msg" id="error-dataEmbargo"></span>
        </div>
        <div class="geo-item">
            <label for="areaEmbargada" class="required">Área Embargada (ha):</label>
            <input type="text" id="areaEmbargada" name="areaEmbargada" class="input" disabled>
            <span class="error-msg" id="error-areaEmbargada"></span>
        </div>
      </div>
    </div>

    <!-- Deliberação -->
    <div class="deliberacao">
        <label class="label-bold required-section">Recomendação do parecer técnico:</label>
        <div class="tipo-controls">
          <label><input type="radio" name="deliberacaoAutoridade" value="DEFERIDA" id="radioDeferida" disabled/> <span>Deferimento</span></label>
          <label><input type="radio" name="deliberacaoAutoridade" value="INDEFERIDA" id="radioIndeferida" disabled/> <span>Indeferimento</span></label>
        </div>
        <span class="error-msg" id="error-deliberacaoAutoridade"></span>
    </div>

    <!-- Sub-opções (Total/Parcial)-->
    <div class="sub-tipo" id="containerSubTipo" style="display:none;">
        <label class="label-bold required-section">Tipo de Deferimento:</label>
        <div class="tipo-controls">
          <label><input type="radio" name="tipoDesembargo" value="TOTAL" id="radioTotal" disabled /> <span>Desembargo Total</span></label>
          <label><input type="radio" name="tipoDesembargo" value="PARCIAL" id="radioParcial" disabled /> <span>Desembargo Parcial</span></label>
          
          <!-- Opção Desinterdição (Oculta por padrão, aparece apenas se vier do banco) -->
          <label id="labelDesinterdicao" style="display:none;">
            <input type="radio" name="tipoDesembargo" value="DESINTERDIÇÃO" disabled /> 
            <span>Desinterdição</span>
          </label>
        </div>
        <span class="error-msg" id="error-tipoDesembargo"></span>
    </div>

    <!-- Inputs Ocultos para Lógica Híbrida -->
    <div style="display:none;">
        <input type="radio" name="tipoDesembargo" value="INDEFERIMENTO" id="radioTipoIndeferimento" disabled>
        <input type="radio" name="tipoDesembargo" value="DESINTERDIÇÃO" id="radioTipoDesinterdicao" disabled>
    </div>

    <!-- Dados do Desembargo -->
    <div class="desembargo-dados">
        <div class="geo-row">
            <div class="geo-item">
                <label for="dataDesembargo" class="required">Data de desembargo:</label>
                <input id="dataDesembargo" name="dataDesembargo" class="input" type="date" disabled/>
                <span class="error-msg" id="error-dataDesembargo"></span>
            </div>
            
            <div class="geo-item" id="containerAreaDesembargada">
                <label for="area" class="required">Área desembargada (ha):</label>
                <input id="area" name="area" class="input" type="text" disabled/>
                <span class="error-msg" id="error-area"></span>
            </div>
        </div>
    </div>

    <!-- Responsável -->
    <div class="responsavel">
      <label for="responsavelDesembargo">Responsável pelo desembargo:</label>
      <input id="responsavelDesembargo" name="responsavelDesembargo" class="input" type="text" disabled/>
      <span class="error-msg" id="error-responsavelDesembargo"></span>
    </div>

    <!-- Status -->
    <div class="status-coord-wrapper">
      <label for="status" id="textoStatus">Status:</label>
      <select id="status" name="status" class="input" disabled>
        <option value="">-- selecione --</option>
        <option value="EM ANÁLISE">Em Análise</option>
        <option value="REVISÃO PENDENTE">Revisão Pendente</option>
        <option value="APROVADO">Aprovado</option>
      </select>
      <span class="error-msg" id="error-status"></span>
    </div>

    <!-- Descrição -->
    <div class="descricao">
      <label for="descricao">Justificativa da deliberação:</label>
      <textarea id="descricao" name="descricao" class="textarea" disabled></textarea>
      <span class="error-msg" id="error-descricao"></span>
    </div>
  </form>

  <!-- Ações -->
  <div class="sv-actions">
    <div class="buttons-container">
      <button id="updateBtn" class="btn" type="submit" form="desembargoForm">
        <i class="fa-solid fa-floppy-disk"></i> SALVAR ALTERAÇÕES
      </button>
      <button type="button" class="btn btn-secondary" onclick="window.location.href='listaDesembargos.html'">
        <i class="fa-solid fa-arrow-left"></i> VOLTAR
      </button>
    </div>
  </div>

  <div id="mensagem-insercao" class="mensagem"></div>
</main>

  <!-- Scripts para login/logout-->
  <script src="js/auth.js"></script>
  <script src="js/userHeader.js"></script>

  <!-- Garantir que o usuário esteja logado -->
  <script>
    Auth.initAuth({ redirectIfMissing: true});
  </script>

  <!-- Scripts -->
  <script src="js/ui.js"></script>
  <script src="js/mainVisualizacaoDesembargo.js"></script>
</body>
</html>
