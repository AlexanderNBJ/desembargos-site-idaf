<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>SeloVerde ES - Área Técnica</title>
  <link rel="icon" type="image/x-icon" href="assets/favicon.png">
  <link rel="stylesheet" href="css/stylesHeader.css">
  <link rel="stylesheet" href="css/stylesList.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"/>
</head>
<body>
  <!-- Header -->
  <header class="top-bar">
    <div class="logo">
      <img src="assets/simbolo-seloverde.svg" alt="Logo Selo Verde">
    </div>

    <div class="title-text">
      <h1>SeloVerde ES - Área Técnica</h1>
      <h2>Formulário de Cadastro de Deliberações de Desembargos</h2>
      <span class="restricted-badge">Área Restrita</span>
    </div>

    <div class="logout-container">
      <button id="logoutBtn" class="logout-btn" aria-label="Logout" title="Sair">Logout</button>
    </div>

  </header>

  <div class="page-container" role="main">
    <div class="list-header" aria-hidden="false">

      <!-- Texto -->
      <div class="list-title-group">
        <h3 class="list-title">Lista de deliberações</h3>
        <p class="list-subtitle">Visualize, filtre e gere documentos</p>
      </div>

      <!-- Barra de pesquisa -->
      <div class="search-wrapper" title="Pesquisar deliberações">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="18" height="18" aria-hidden="true">
          <path fill="#666" d="M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zM9.5 14A4.5 4.5 0 1 1 14 9.5 4.5 4.5 0 0 1 9.5 14z"/>
        </svg>

        <input id="search" type="search" placeholder="Pesquisar por termo, processo, autuado, status..." aria-label="Pesquisar desembargos">
      </div>
    
    </div>

    <div id="tabs" class="tabs" role="tablist" aria-label="Filtros de deliberações"> </div>

    <!-- "Header" da lista -->
    <div class="table-card" role="region" aria-label="Lista de deliberações">
      <div class="table-toolbar">

        <!-- Linhas por página -->
        <div class="table-controls">
          <label for="pageSize" class="small-muted">Linhas por página</label>

          <select id="pageSize" class="page-size" aria-label="Linhas por página">
            <option value="5">5</option>
            <option value="10" selected>10</option>
            <option value="25">25</option>
          </select>

          <div id="current-filter" class="small-muted" style="margin-left:12px;"></div>
        </div>

        <div class="table-controls">
          <div id="summaryText" class="small-muted" aria-live="polite"></div>
        </div>
      </div>

      <!-- Tabela dinâmica com as informações -->
      <table class="desembargos" role="table" aria-label="Tabela de deliberações">
        <thead>
          <tr>
            <th class="col-termo sortable" data-key="termo">Termo de Embargo</th>
            <th class="col-processo sortable" data-key="processo">Processo</th>
            <th class="col-sep sortable" data-key="sep">SEP</th>
            <th class="col-edocs sortable" data-key="edocs">e-Docs</th>
            <th class="col-autuado sortable" data-key="autuado">Autuado</th>
            <th class="col-tipo sortable" data-key="tipo">Tipo</th>
            <th class="col-area sortable" data-key="status">Status</th>
            <th class="col-data sortable" data-key="data">Data</th>
            <th class="col-acoes">Ações</th>
          </tr>
        </thead>

        <tbody id="desembargos-list" aria-live="polite">
        </tbody>
      </table>

      <div class="pagination" id="paginationControls" aria-label="Controles de paginação"></div>
    </div>

    <!-- Template de linha para as informações da tabela-->
    <template id="row-template">
      <tr data-id="{{id}}">
        <td class="col-termo">{{termo}}</td>
        <td class="col-processo">{{processo}}</td>
        <td class="col-sep">{{sep}}</td>
        <td class="col-edocs">{{edocs}}</td>
        <td class="col-autuado">{{autuado}}</td>
        <td class="col-tipo muted">{{tipo}}</td>
        <td class="col-status muted">{{status}}</td>
        <td class="col-data">{{data}}</td>

        <td class="col-acoes">
          <div class="actions">
            <button class="action-btn" data-action="view" title="Visualizar" aria-label="Visualizar">
              <svg class="icon" viewBox="0 0 24 24"><path d="M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zM9.5 14A4.5 4.5 0 1 1 14 9.5 4.5 4.5 0 0 1 9.5 14z"/></svg>
            </button>
            <button class="action-btn" data-action="pdf" title="Gerar PDF" aria-label="Gerar PDF">
              <svg class="icon" viewBox="0 0 24 24"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8l-6-6zM13 3.5L18.5 9H13V3.5zM6 20V4h6v5h5v11H6z"/></svg>
            </button>
          </div>
        </td>

      </tr>
    </template>

    <!-- Botão de voltar para o menu principal -->
    <div class="sv-actions" style="margin-top:14px;">
      <button type="button" class="btn back" onclick="window.location.href='menuPrincipal.html'">
        <i class="fa-solid fa-arrow-left"></i> VOLTAR
      </button>
    </div>
  
  </div>

  <!-- Tela de carregamento para o fetch no BD -->
  <div id="sv-loader" class="sv-loader" aria-hidden="true" aria-live="polite" role="status">
    <div class="sv-loader-inner" aria-hidden="true">
      <div class="sv-spinner" aria-hidden="true"></div>
      <div class="sv-loader-text">Carregando deliberações...</div>
    </div>
  </div>

  <!-- Scripts de login/logout -->
  <script src="js/auth.js"></script>
  <script src="js/userHeader.js"></script>
  <script src="js/api.js"></script>
  <!-- Logout -->
  <script>
    Auth.initAuth({ redirectIfMissing: true});
  </script>

  <!-- Scripts -->
  <script src="js/mainListaDesembargos.js"></script>
</body>
</html>
